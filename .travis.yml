matrix:
  include:
    # compile example sketches
    - name: 'Compile Examples'
      language: minimal
      env:
        - CLI_VERSION=latest
        - BOARD='arduino:samd:mkrzero'

      before_install:
        - wget http://downloads.arduino.cc/arduino-cli/arduino-cli-$CLI_VERSION-linux64.tar.bz2
        - tar xf arduino-cli-$CLI_VERSION-linux64.tar.bz2
        - mkdir -p "$HOME/bin"
        - mv arduino-cli-*-linux64 $HOME/bin/arduino-cli
        - export PATH="$PATH:$HOME/bin"

        - arduino-cli core update-index
        - arduino-cli core install arduino:samd

        - buildExampleSketch() { arduino-cli compile --verbose --warnings all --fqbn $BOARD "$PWD/examples/$1"; }

      install:
        - mkdir -p "$HOME/Arduino/libraries"
        - ln -s "$PWD" "$HOME/Arduino/libraries/."

      script:
        - buildExampleSketch GPSLocation
        - buildExampleSketch GPSLocationStandy


